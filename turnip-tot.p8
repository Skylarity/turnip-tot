pico-8 cartridge // http://www.pico-8.com
version 28
__lua__
--Ë‡turnip totË‡
--made with â™¥ by skyler rexroad

-- utility --
-------------
-- from http://lua-users.org/wiki/copytable
function deepcopy(orig)
	local orig_type = type(orig)
	local copy
	if orig_type == 'table' then
		copy = {}
		for orig_key, orig_value in next, orig, nil do
		    copy[deepcopy(orig_key)] = deepcopy(orig_value)
		end
		setmetatable(copy, deepcopy(getmetatable(orig)))
	else -- number, string, boolean, etc
		copy = orig
	end
	return copy
end

function nrml(v,mn,mx)
	return (v-mn) / (mx-mn)
end

-- globals --
-------------
room = {x=1, y=1} --0,0 is bg
objects = {}
classes = {}
player = nil
tot = nil
ball = nil

tot_bnd = {
	minx=6, miny=22,
	maxx=114, maxy=114
}

bg_color = 1
shake = 0

-- obj management --
--------------------
function init_obj(class,x,y)
	local obj = {}
	obj.class = class
	obj.collideable = true
	
	obj.spr = class.tile
	obj.flip = {x=false,y=false}
	
	obj.x = x
	obj.y = y
	obj.hitbox = {
		x=0,y=0,
		w=8,h=8
	}
	
	obj.collide = function(class,ox,oy)
		local other
		for i=1,count(objects) do
		other = objects[i]
			if other != nil
				and other.class == class
				and other != obj
				and other.collideable
				and other.x+other.hitbox.x+other.hitbox.w > obj.x+obj.hitbox.x+ox
				and other.y+other.hitbox.y+other.hitbox.h > obj.y+obj.hitbox.y+oy
				and other.x+other.hitbox.x < obj.x+obj.hitbox.x+obj.hitbox.w+ox
				and other.y+other.hitbox.y < obj.y+obj.hitbox.y+obj.hitbox.h+oy
				then return other
			end
		end
		return nil
	end
	
	obj.check = function(class,ox,oy)
		return obj.collide(class,ox,oy) != nil
	end
	
	add(objects,obj)
	if obj.class.init != nil then
		obj.class.init(obj)
	end
	return obj
end

function destroy_obj(obj)
	del(objects,obj)
end

function draw_object(obj)
	if obj.class.draw!=nil then
		obj.class.draw(obj)
	elseif obj.spr > 0 then
		spr(obj.spr,obj.x,obj.y,1,1,obj.flip.x,obj.flip.y)
	end
end

-- room management --
---------------------
function load_room(x,y)
	room.x = x
	room.y = y
	
	-- remove existing objects
	foreach(objects,destroy_obj)
	
	-- add new objects
	for tx=0,15 do
		for ty=0,15 do
			local tile = mget(
				room.x*16+tx,
				room.y*16+ty
			)
			
			foreach(classes,
			function(class)
				if class.tile == tile then
					init_obj(class,tx*8,ty*8)
				end
			end)
		end
	end
end

-- saving --
------------
save_id = "skylarity_turnip_tot_v0"
saved = 0
save_game_saved = 0
-- tot
save_age = 1
save_hp = 2
save_mood = 3
save_hunger = 4
-- time
save_year = 5
save_month = 6
save_day = 7
save_hour = 8
save_minute = 9
save_second = 10

-- time --
----------
last_played = {}

function get_cur_time()
	return {
		year=stat(90),
		month=stat(91),
	  day=stat(92),
		hour=stat(93),
		minute=stat(94),
		second=stat(95)
	}
end

function load_saved_time()
	return {
		year=dget(save_year),
		month=dget(save_month),
	  day=dget(save_day),
		hour=dget(save_hour),
		minute=dget(save_minute),
		second=dget(save_second)
	}
end

function save_time(tm)
	dset(save_year,tm.year)
	dset(save_month,tm.month)
  dset(save_day,tm.day)
	dset(save_hour,tm.hour)
	dset(save_minute,tm.minute)
	dset(save_second,tm.second)
end

function compare_time(prev_tm)
	local cur_tm = get_cur_time()
	local delta = 0
	
	--todo: add stuff together
end

-- game loop --
---------------
function _init()
	-- initialize storage --
	cartdata(save_id)
	saved = dget(save_game_saved)
	
	-- initialize ui --
	ui_init()
	
	-- initialize tot --
	local init_spot = get_rnd_tot_spot(64,64)
	tot = init_obj(turnip_tot,init_spot.x,init_spot.y)
	
	-- initialize player --
	player = init_obj(player,64,64)
	
	-- initialize interactables --
	local ball_spot = get_rnd_tot_spot(64,64)
	ball = init_obj(ball,ball_spot.x,ball_spot.y)
end

function _update()
	-- screenshake --
	if shake>0 then
		shake-=1
		camera()
		if shake>0 then
			camera(-2+rnd(5),-2+rnd(5))
		end
	end
	
	-- update objects --
	foreach(objects,function(obj)
		if obj.class.update!=nil then
			obj.class.update(obj)
		end
	end)
	
	-- ui --
	ui_update()
end

function _draw()
	-- reset palette --
	pal()
	
	-- clear screen --
	cls(bg_color)
	
	-- draw bg --
	map(0,0)
	
	-- draw objects --
	foreach(objects,draw_object)
	
	-- ui --
	ui_draw()
end

-- debug --
function log(txt,x,y)
	print(txt,x,y,flr(time()*4)%2==0 and 0 or 2)
end

-->8
-- turnip tot class --
----------------------

turnip_tot = {
feed=function(this,healthy)
	this.hunger = this.hungermax
	
	if not healthy then
		this.happy += this.happymax/2
		this.health -= this.health/4
	end
end,
init=function(this)
	-- stats --
	this.age = 1 -- 0 or 1
	this.hpmax = 255
	this.hp = this.hpmax
	this.happymax = 255
	this.mood_i = 1
	this.mood = nil
	this.happy = this.happymax
	this.hungermax = 255
	this.hunger = this.hungermax
	this.hungerrate = 0.01

	-- get saved data --
	if saved == 1 then
		this.age = dget(save_age)
		this.hp = dget(save_hp)
		this.mood_i = dget(save_mood)
		this.happy = dget(save_happy)
		this.hunger = dget(save_hunger)
	end
	
	-- gfx --
	this.spr = this.age==0 and 3 or 4
	this.spr_off = 0
	
	-- mood --
	this.e_t_max = 500
	this.get_et=function()
		return rnd(this.e_t_max)+50
	end
	this.emote_timer = this.get_et()
	init_tot_mood(this.mood_i,this)
	
	-- movement --
	this.roam = true
	this.moving = false
	this.spd = 0.25
	this.target = {x=this.x,y=this.y}
	this.mv_cntdwn = 0
	
	-- state --
	-- must be last --
	init_state(p_states[1],nil,this)
end,
update=function(this)
	-- movement --
	if this.x < this.target.x then
		this.flip.x = false
		this.x += this.spd
	elseif this.x > this.target.x then
		this.flip.x = true
		this.x -= this.spd
	end
	if this.y < this.target.y then
		this.y += this.spd
	elseif this.y > this.target.y then
		this.y -= this.spd
	end
	this.moving = this.x!=this.target.x or this.y!=this.target.y
	
	if this.roam then
		this.mv_cntdwn -= 1
		if this.mv_cntdwn <= 0 then
			this.mv_cntdwn = rnd(200)+50
			this.target = get_rnd_tot_spot(this.x,this.y)
		end
	end
	
	-- mood --
	this.emote_timer -= 1
	if this.emote_timer <= 0 then
		local em = this.mood.emote(this.x,this.y-4)
		this.emote_timer = this.get_et()
	end
	
	-- hunger --
	this.hunger -= this.hungerrate

	-- state --
	if this.state.t_update != nil then
		this.state.t_update(this)
	end
	
	-- clamping stats --
	this.age = mid(0,this.age,255)
	this.hp = mid(0,this.hp,255)
	this.happy = mid(0,this.happy,255)
	this.hunger = mid(0,this.hunger,255)

	-- saving --
	--save_tot(this)
end,
draw=function(this)
	-- tot sprite --
	this.spr_off += this.moving and 0.25 or 0
	if this.age == 0 then
		if this.moving then
			this.spr = 19+this.spr_off%2
		else
			this.spr = 3
		end
	else
		if this.moving then
			this.spr = 16+this.spr_off%3
		else
			this.spr = 4
		end
	end
	spr(this.spr,this.x,this.y,1,1,this.flip.x,this.flip.y)

	-- state --
	if this.state.t_draw != nil then
		this.state.t_draw(this)
	end
end
}
add(classes,turnip_tot)

function save_tot(tot)
	dset(save_age,this.age)
	dset(save_hp,this.hp)
	dset(save_mood,this.mood)
	dset(save_happy,this.happy)
	dset(save_hunger,this.hunger)

	-- set flag
	saved = 1
	dset(dget(save_game_saved),saved)
end

function get_rnd_tot_spot(x,y)
	local range = 32
	
	x = ((flr(rnd(range))*2)-range)+x
	x = mid(tot_bnd.minx,x,tot_bnd.maxx)
	
	y = ((flr(rnd(range))*2)-range)+y
	y = mid(tot_bnd.miny,y,tot_bnd.maxy)
	
	return {x=x,y=y}
end

function init_tot_mood(i,tot)
	tot.mood = tot_moods[i]
	if tot.mood.init != nil then
		tot.mood.init(tot)
	end
end

-- emotes --
------------
emote = {
flash = 0,
init=function(this)
	this.timer = rnd(50)+25
end,
update=function(this)
	this.y-=rnd(1)+(sin(time())*0.25)
	this.x+=cos(time())*0.25
	
	this.timer -= 1
	if this.timer <= 0
		or this.y < 16 then
		del(objects,this)
	end
end,
draw=function(this)
	pal()
	if flr(time()*3)%2==0 then
		pal(7,this.class.flash)
	end
	spr(this.spr,this.x,this.y)
	pal()
end,
}
function emote_factory(s,f)
	local e = deepcopy(emote)
	e.tile = s --sprite
	e.flash = f --flash color
	return function(x,y)
		return init_obj(e,x,y)
	end
end

-- moods --
-----------
tot_moods = {
--â–ˆ 1 - happy â–ˆ--
{
name="happy",
emote=emote_factory(21,12),
init=function(tot)
	--todo
end,
update=function(tot)
	--todo
end,
draw=function(tot)
	--todo
end
},
--â–ˆ 2 - bored â–ˆ--
{
name="bored",
emote=emote_factory(22,15),
init=function(tot)
	--todo
end,
update=function(tot)
	--todo
end,
draw=function(tot)
	--todo
end
},
--â–ˆ 3 - sad â–ˆ--
{
name="sad",
emote=emote_factory(23,13),
init=function(tot)
	--todo
end,
update=function(tot)
	--todo
end,
draw=function(tot)
	--todo
end
},
--â–ˆ 4 - hungry â–ˆ--
{
name="hungry",
emote=emote_factory(24,9),
init=function(tot)
	--todo
end,
update=function(tot)
	--todo
end,
draw=function(tot)
	--todo
end
},
--â–ˆ 5 - sick â–ˆ--
{
name="sick",
emote=emote_factory(25,2),
init=function(tot)
	--todo
end,
update=function(tot)
	--todo
end,
draw=function(tot)
	--todo
end
}
}
-->8
-- ui --
--------

function ui_init()
	--todo
end

function ui_update()
	--todo
end

function ui_draw()
	pal()
	
	local bad_bg = 2
	local bad_fg = 8
	--hp
	local hp_clrbg = tot.hp < tot.hpmax / 2 and bad_bg or 3
	local hp_clrfg = tot.hp < tot.hpmax / 2 and bad_fg or 11
	ui_bar(0,0,31,
		tot.hpmax,tot.hp,
		hp_clrbg,hp_clrfg,
		"â™¥")
	--mood
	local hy_clrbg = tot.happy < tot.happymax / 2 and bad_bg or 1
	local hy_clrfg = tot.happy < tot.happymax / 2 and bad_fg or 12
	ui_bar(32,0,63,
		tot.happymax,tot.happy,
		hy_clrbg,hy_clrfg,
		"ðŸ˜")
	--hunger
	local hg_clrbg = tot.hunger < tot.hungermax / 2 and bad_bg or 4
	local hg_clrfg = tot.hunger < tot.hungermax / 2 and bad_fg or 9
	ui_bar(96,0,31,
		tot.hungermax,tot.hunger,
		hg_clrbg,hg_clrfg,
		"â—")
end

-- x, y, width,
-- source value, max value,
-- bg color, fg color
-- single-char label
function ui_bar(x,y,w,
		srcmax,src,
		clrbg,clrfg,
		txt)
	local convert = w / srcmax
	local val = src * convert
	
	--bg
	rectfill(x,y,x+w,y+8,clrbg)
	--fg
	rectfill(x,y,x+val,y+8,clrfg)
	--border
	rect(x,y,x+w,y+8,7)
	--label
	print(txt,x+(w/2)-3,y+2,7)
end
-->8
-- player --
------------

player = {
init=function(p)
	init_state(p_states[1],p)
end,
update=function(p)
	if p.state.update != nil then
		p.state.update(p)
	end
end,
draw=function(p)
	if p.state.draw != nil then
		p.state.draw(p)
	end
end
}
add(classes,player)

function init_state(state,p,t)
	-- player --
	if p != nil then
		p.state = state
		if p.state.init != nil then
			p.state.init(p)
		end
	end
	
	-- tot --
	if t != nil then
		t.state = state
		if t.state.t_init != nil then
			t.state.t_init(t)
		end
	end
end

p_states = {
--â–ˆ 1 - idle â–ˆ--
{
name="idle",
init=function(p)
	p.cur_sel = 2
	
	-- tot --
	if tot != nil then
		init_state(p_states[1],nil,tot)
	end
end,
t_init=function(tot)
	tot.roam = true
end,
update=function(p)
	if btnp(â¬†ï¸) then p.cur_sel-=1 end
	if btnp(â¬‡ï¸) then p.cur_sel+=1 end
	p.cur_sel = mid(2,p.cur_sel,5)
	if btnp(ðŸ…¾ï¸) then
		init_state(p_states[p.cur_sel],p)
	end
end,
draw=function(p)
	local ready = false
	
	-- bg --
	rectfill(0,9,37,17,ready and 3 or 2)
	
	-- text --
	print((ready and "ðŸ…¾ï¸" or "â§—").." "..p_states[p.cur_sel].name,
			2,11,7)
	
	-- up/down arrows --
	local wobble = sin(time())*2
	wobble = mid(-1,wobble,1)
	if p.cur_sel > 2 then
		spr(34,30,9+wobble)
	end
	if p.cur_sel < 5 then
		spr(35,30,9+wobble)
	end
	
	-- border --
	rect(0,9,37,17,7)
	
	-- ready indicator --
	-- bg
	rectfill(38,9,127,17,6)
	-- fg
	rectfill(38,9,127,17,7)
	-- border
	rect(38,9,127,17,7)
	-- label
	local flasher = flr(time()*2)%2==0 and ":" or " "
	local hour = flr(time()/60/60)%12
	local minute = flr(time()/60)%60
	local second = flr(time())%60
	
	local str = ""
	str ..= tostr(hour)
	str ..= flasher
	str ..= tostr(minute)
	str ..= flasher
	str ..= tostr(second)
	str ..= " remaining"
	
	if ready then str = "ready" end
	
	print(str,
			40,
			11,
			0)
end
},
--â–ˆ 2 - play â–ˆ--
{
name="play",
init=function(p)
	-- tot --
	if tot != nil then
		init_state(p_states[2],nil,tot)
	end
end,
t_init=function(tot)
	tot.ball_touch = 0
	tot.ball_follow = 0
end,
update=function(p)
	if btnp(â¬…ï¸) then
		ball.class.move(ball,-1,0)
	elseif btnp(âž¡ï¸) then
		ball.class.move(ball,1,0)
	elseif btnp(â¬†ï¸) then
		ball.class.move(ball,0,-1)
	elseif btnp(â¬‡ï¸) then
		ball.class.move(ball,0,1)
	end

	-- back --
	to_idle_state(p)
end,
t_update=function(tot)
	tot.roam = false
	tot.target.x = ball.x
	tot.target.y = ball.y
	
	local dist = 8
	if abs(ball.x-tot.x) < dist
			and abs(ball.y-tot.y) < dist then
		tot.ball_touch += 1
		tot.ball_follow = 0
	else
		tot.ball_touch = 0
		tot.ball_follow += 1
	end
	
	local bt_time = 60
	local bf_time = 120
	if tot.ball_touch > bt_time
			or tot.ball_follow > bf_time then
		tot.happy -= 0.2
		
		if tot.ball_touch > bt_time then
			-- bored
			init_tot_mood(2,tot)
		elseif tot.ball_follow > bf_time then
			-- sad
			init_tot_mood(3,tot)
		end
	else
		tot.happy += 1
		
		-- happy
		init_tot_mood(1,tot)
	end
end,
draw=function(p)
	draw_back("playing")
end
},
--â–ˆ 3 - feed â–ˆ--
{
name="feed",
init=function(p)
end,
update=function(p)
	to_idle_state(p)
end,
draw=function(p)
	draw_back("feeding")
end
},
--â–ˆ 4 - tidy â–ˆ--
{
name="tidy",
init=function(p)
end,
update=function(p)
	to_idle_state(p)
end,
draw=function(p)
	draw_back("tidying")
end
},
--â–ˆ 5 - cure â–ˆ--
{
name="cure",
init=function(p)
end,
update=function(p)
	to_idle_state(p)
end,
draw=function(p)
	draw_back("curing")
end
}
}

function to_idle_state(p)
	if btnp(âŽ) then
		init_state(p_states[1],p)
	end
end

function draw_back(action)
	print("âŽ stop "..action,2,11,7)
end
-->8
-- interactables --
-------------------

-- ball --
----------
ball = {
name="ball",
tile=36,
move=function(this,dx,dy)
	if not this.moving then
		this.tx = mid(
			tot_bnd.minx,
			this.px+dx*32,
			tot_bnd.maxx
		)
		this.ty = mid(
			tot_bnd.miny,
			this.py+dy*32,
			tot_bnd.maxy
		)
		
		particle_burst(4,nil,5,
			this.x+3,this.y+7)
		
		this.moving = true
	end
end,
init=function(this)
	-- movement --
	this.moving = false
	this.spd = 1
	
	-- prev pos --
	this.px = this.x
	this.py = this.y
	
	-- new pos
	this.tx = this.x
	this.ty = this.y
	
	-- ball spr pos --
	this.bx = this.x
	this.by = this.y
end,
update=function(this)
	-- movement --
	if this.px != this.tx
			or this.py != this.ty then
		if this.x < this.tx then
			this.x += this.spd
		elseif this.x > this.tx then
			this.x -= this.spd
		end
		
		if this.y < this.ty then
			this.y += this.spd
		elseif this.y > this.ty then
			this.y -= this.spd
		end
	end
	
	if this.x == this.tx
			and this.y == this.ty then
		this.px = this.tx
		this.py = this.ty
		this.moving = false
	end
	
	-- ball gfx --
	this.bx = this.x
	
	local val = 0
	local mn = 0
	local mx = 0
	if this.px != this.tx then
		val = this.x
		mn = this.px
		mx = this.tx
	elseif this.py != this.ty then
		val = this.y
		mn = this.py
		mx = this.ty
	end
	local prg = nrml(val,mn,mx)
	local mult = prg <= 0.5 and 6 or 3
	this.by = this.y-abs(sin(prg)*mult)
end,
draw=function(this)
	ovalfill(this.x+2,this.y+6,
			this.x+5,this.y+8,
			0)
	spr(this.spr,this.bx+2,this.by+4)
end
}
add(classes,ball)

-- food --
----------
food = {
healthy=true,
init=function(f)
	f.healthy = f.class.healthy
	
	f.tile = f.healthy and 39 or 40
end,
update=function(f)
	local col = f.check(tot,f.x,f.y)
	if col != nil then
		tot.feed(tot,f.healthy)
		del(objects,f)
	end
end
}
add(classes,food)

function create_food(healthy,x,y)
	local f = deepcopy(food)
	f.healthy = healthy
	init_obj(f,x,y)
end

-->8
-- particles --
---------------

particle={
c = 0,
t = 10,
init=function(p)
	p.t = p.class.t
	p.c = p.class.c
	
	p.dx = (rnd(2)-1)*.5
	p.dy = (rnd(2)-1)*.5
	
	p.timer = rnd(p.t)+(p.t/2)
end,
update=function(p)
	p.x += p.dx
	p.y += p.dy
	
	p.timer -= 1
	if p.timer <= 0 then
		del(objects,p)
	end
end,
draw=function(p)
	pset(p.x,p.y,p.c)
end
}
add(classes,particle)

function particle_burst(n,t,c,x,y)
	local p = deepcopy(particle)
	p.c = c
	if t != nil then p.t = t end
	for i=0,n do
		init_obj(p,x,y)
	end
end

__gfx__
000000000000000000000000000000000000b0000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000
000000000000000000000000000000000003b000060000000000c000000000000000000000000000000000000000000000000000000000000000000000000000
007007000000000000000000000000000077370000000000000cac00000000000000000000000000000000000000000000000000000000000000000000000000
0007700000000000000000000003b00007777770000000000000c0000000000000000e0000303000000000000000000000000000000000000000000000000000
00077000000000000000000000003000077676700000006000000000000000000000efe000030000000000000000000000000000000000000000000000000000
0070070000000000003b0000000777000771717000000000000000000080000000000e0000000000060000000000000000000000000000000000000000000000
00000000066d6600066366000071710006d777d00006000000000000089800000000000000000000000006000000000000000000000000000000000000000000
00000000006660000066600000d77700006006000000000000000000008000000000000000000000000000000000000000000000000000000000000000000000
00bb00000003b00000bb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
007737000000b0000077370000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
07777770007737000777777000000000000b00000000770000000000007000700077070700000000000000000000000000000000000000000000000000000000
0776767007777770077676700003b0000000b0000000700000000000077707770077077700077770000000000000000000000000000000000000000000000000
07717170077676700771717000077700000030000007700000707070077707770077007000070700000000000000000000000000000000000000000000000000
06d777d00771717006d777d000717100000777000007700000000000007707700007007000077770000000000000000000000000000000000000000000000000
0600006006d777d00006600000d77700007171000000000000000000000707000007007000007070000000000000000000000000000000000000000000000000
0000000000600600000000000000000000d777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000004900000000000000000000e8000000000000000000000000000000004000000000000000000000000000000000000000000000000000000000000
00000000000490000000000000000000e88800000000000000000000000000000009440000000000000000000000000000000000000000000000000000000000
00000000000490000007000000000000888800000000000000044000007447000008984000000000000000000000000000000000000000000000000000000000
99999999000490000077700000000000088000000a7aa77000444400074443700099994000000000000000000000000000000000000000000000000000000000
4444444400044000000000000000000000000000a7aa77aa005445007c6473370089898400000000000000000000000000000000000000000000000000000000
00049000000490000000000000777000000000000aa77aa004455440767737370999900000000000000000000000000000000000000000000000000000000000
00d49d0000d49d00000000000007000000000000000000000544445007cc33700980000000000000000000000000000000000000000000000000000000000000
000dd000000490000000000000000000000000000000000000555500007773000000000000000000000000000000000000000000000000000000000000000000
00049000000490000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00049000000490000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00049000000490000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00049999999990000004999999999000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00044444444440000004944444449000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00049000000490000004900000049000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00d49d0000d49d0000d49d0000d49d00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000dd000000dd0000004900000049000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ba00000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000bba0000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003bb0000000000000000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003b0000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003ddddddddddddddddddddddddd000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000d3777d7d7d777d77dd777d777ddd00
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dddd7dd7d7d7d7d7d7dd7dd7d7dddd0
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dddd7dd7d7d77dd7d7dd7dd777dddd0
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dddd7dd7d7d7d7d7d7dd7dd7dddddd0
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dddd7dd777d7d7d7d7d777d7dddddd0
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dddddddddddddddddddddddddddd00
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000dd6666666666666666666666dd000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000677777767777776777777600000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000677777767777776777777600000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000666776667766776667766600000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006776067766776067760000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006776067766776067760000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006776067766776067760000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006776067777776067760000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006776067777776067760000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006666066666666066660000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b0000000000000000
000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003b0000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000737700000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007777770000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007767670000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007717170000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000556d777d5500000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000055655655000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005555550000000000000
__label__
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
7bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb77cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc779999999999999999999999999999997
7bbbbbbbbbbbb77b77bbbbbbbbbbbbb77ccccccccccccccccccccccccccc7777777cccccccccccccccccccccccccccc779999999999999777999999999999997
7bbbbbbbbbbbb77777bbbbbbbbbbbbb77ccccccccccccccccccccccccccc7c777c7cccccccccccccccccccccccccccc779999999999997779799999999999997
7bbbbbbbbbbbb77777bbbbbbbbbbbbb77ccccccccccccccccccccccccccc7777777cccccccccccccccccccccccccccc779999999999997777799999999999997
7bbbbbbbbbbbbb777bbbbbbbbbbbbbb77ccccccccccccccccccccccccccc7ccccc7cccccccccccccccccccccccccccc779999999999997777799999999999997
7bbbbbbbbbbbbbb7bbbbbbbbbbbbbbb77ccccccccccccccccccccccccccc7777777cccccccccccccccccccccccccccc779999999999999777999999999999997
7bbbbbbbbbbbbbbbbbbbbbbbbbbbbbb77cccccccccccccccccccccccccccccccccccccccccccccccccccccccccccccc779999999999999999999999999999997
77777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777777
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11177777111111777171117771717111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11771117711111717171117171717111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11771717711111777171117771777111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11771117711111711171117171117111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11177777111111711177717171777111777111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111171111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
11149999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111
11149444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444449111
11149111111491111114911111149111111491111114911111149111111491111114911111149111111491111114911111149111111491111114911111149111
11d49d1111d49d1111d49d1111d49d1111d49d1111d49d1111d49d1111d49d1111d49d1111d49d1111d49d1111d49d1111d49d1111d49d1111d49d1111d49d11
11149111111dd111111dd111111dd111111dd111111dd111111dd111111dd111111dd111111dd111111dd111111dd111111dd111111dd111111dd11111149111
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111111111111111111111111111c11111111111111111111111111111111111111111111111111111111111111111111111111111149111
1114911111111111111111111111111111111111111cac1111111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111111111111111111111111111c11111111111111111111111111111111111111111111111111111111111111111111111111111149111
11144111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111144111
11149111111111111111111111111111111111111111111111111111118111111111111111111111111111111111111111111111111111111111111111149111
11d49d11111111111111111111111111111111111111111111111111189811111111111111111111111111111111111111111111111111111111111111d49d11
11149111111111111111111111111111111111111111111111111111118111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111111111111116111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111113131111111111111149111
11144111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111311111111111111144111
11149111111111111111111116111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11d49d11111111111111111111111611111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111d49d11
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111111111111111111111111111111116111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111131311111111111111111111111111111111111111111111111111111111e11111111111111111111313111111111111111111111149111
1114411111111111111311111111111111111111111111111111116111111111111111111111efe1111111111111111111131111111111111111111111144111
11149111111111111111111111111111111111111111111111111111111111111111111111111e11111111111181111111111111111111111111111111149111
11d49d11111111111111111111111111111111111111111111161111111111111111111111111111111111111898111111111111111111111111111111d49d11
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111181111111111111111111111111111111149111
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
1114911111111111111111111111111111111111111111111111111111111111111111111111111111111e111111111111111111111111111131311111149111
111441111111111111111111111111111111111111111111111111111111111111111111111111111111efe11111111111111111111111111113111111144111
1114911111111111111111111111111111111111111111111111111111111111111111111111111111111e111111111111111111111111111111111111149111
11d49d11111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111d49d11
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111611149111
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
1114911111111111111111b111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
1114411111111111111111b311111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111144111
11149111111111111111173771111111111111111111111111111111111111111111111111111111111111111111111111111111111111111611111111149111
11d49d11111111111111777777111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111161111d49d11
11149111111111111111767677111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111717177111111111111111111111111111111111111111111111611111111111111111111111111111111111111111111111111149111
11149111111111111111d777d6111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111161161111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11144111111111111111111111111161111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111144111
11149111111111111111111111111111111111111111111111111111111111111611111111111111111111111111111111111111111111111111111111149111
11d49d11111111111111111111161111111111111111111111111111111111111111161111111111111111111111111111111111111111111111111111d49d11
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
111491111111c1111111111111111111111111111111111111111111111111111111111111111111161111111111111111111111111111111111111111149111
11149111111cac111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
111491111111c1111111111111111111111111111111111111313111111111111111111111111111111111111111111111111111111111111111111111149111
11144111111111111111111111111111111111111111111111131111111111111111111111111111111111611111111111111111111111111111111111144111
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11d49d11111111111111111111111111111111111111111111111111111111111111111111111111111611111111111111111111111111111111111111d49d11
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11144111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111144111
11149111111111111111111111111111111111111181111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11d49d11111111111111111111111111111111111898111111111111111111111111111111111111111111111111111111111111111111111111111111d49d11
11149111111111111111111111111111111111111181111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111111111111111111111111111111111111111161111111111111111111111111111111111c11111111111111111111111111111149111
1114911111111111111111111111111111111111111111111111111111111111111111111111111111111111111cac1111111111111111111111111111149111
11149111111111111111111111313111111111111111111111111111111111111111111111111111111111111111c11111111111111111111111111111149111
11144111111111111111111111131111111111111111111111111111111111611111111111111111111111111111111111111111111111111111111111144111
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11d49d11111111111111111111111111111111111111111111111111111611111111111111111111111111111111111111111111111111111111111111d49d11
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111111111111111111111111111111111111111111111111111111111111116111111111111111111111111111111111111111111149111
111491111111111116111111111111111111111111111111111111111111111111111111111111111111c1111111111111111111161111111111111111149111
11149111111111111111111111111111111111111111111111111111111111111111111111111111111cac111111111111111111111111111111111111149111
111491111111111111111111111111111111111111111111111111111111111111111111111111111111c1111111111111111111111111111111111111149111
11144111111111111111116111111111111111111111111111111111111111111111111111111111111111111111111111111111111111611111111111144111
11149111111111111111111111111111111111111111111111111111111111111111111116111111111111111111111111111111111111111111111111149111
11d49d11111111111116111111111111111111111111111111111111111111111111111111111611111111111111111111111111111611111111111111d49d11
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111111111111111111111161111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111c111111111111111c1111111111111149111
1114911111111111111111111111111111111111111111111111111111111111111111111111111111111111111cac1111111111111cac111111111111149111
1114911111111e111111111111111111111111111111111111111111111111111111111111111111111111111111c111113131111111c1111111111111149111
111441111111efe11111111111111111111111111111111111111111111111111111111111111111111111111111111111131111111111111111111111144111
1114911111111e111111111111111111161111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11d49d11111111111111111111111111111116111111111111111111111111111111111111111111111111111111111111111111111111111111111111d49d11
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111111111111111111111111111111116111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111111111111111111111111111111111111111111111111111111111111111113131111111111111111111111111111111111111149111
11144111111111111111111111111111111111111111111111111161111111111111111111111111111311111111111111111111111111111111111111144111
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11d49d11111111111111111111111111111111111111111111161111111111111111111111111111111111111111111111111111111111111111111111d49d11
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11149111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111149111
11149999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999111
11144444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444111
11149111111491111114911111149111111491111114911111149111111491111114911111149111111491111114911111149111111491111114911111149111
11d49d1111d49d1111d49d1111d49d1111d49d1111d49d1111d49d1111d49d1111d49d1111d49d1111d49d1111d49d1111d49d1111d49d1111d49d1111d49d11
111dd111111dd111111dd111111dd111111dd111111dd111111dd111111dd111111dd111111dd111111dd111111dd111111dd111111dd111111dd111111dd111

__gff__
0000000000000000000000000000000000000000000000000000000000000000010100000000000000000000000000000101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3220202020202020202020202020203300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2100000000060007000000000000002100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2100000a00000000000000000009002100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2100090000000500000800070900002100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2100000000000000000008000000092100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
21000000000000000000000000000a2100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
21000005000000000a0000000000002100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2106000000000900000005000000002100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2100000000070000000000000000002100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2100000900000005000000060000002100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2100050000000000000a06000005002100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
210800000a000000000000060906002100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2100000000000500000009000000002100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3020202020202020202020202020203100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
